import{a as L}from"./chunk-BJCE6GIO.js";import{A as M,Ba as E,E as u,Ga as k,H as x,I as O,Ia as m,Ja as F,Ka as N,M as d,Ma as I,N as t,Na as z,O as o,Oa as R,P as g,Ra as T,Sa as A,Ta as D,U as v,V as P,ba as w,ca as f,da as i,qa as y,ta as S,v as a,vb as j,wb as q,y as h}from"./chunk-GZNI7DYC.js";import"./chunk-447CKG3T.js";import"./chunk-CDZFCBFW.js";import"./chunk-E2CLONXR.js";import"./chunk-KRDHHS7Z.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-LRFGNCHE.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";function U(n,l){n&1&&(t(0,"small"),i(1,"El nombre es obligatorio."),o())}function V(n,l){n&1&&(t(0,"small"),i(1,"M\xEDnimo 3 caracteres."),o())}function W(n,l){if(n&1&&(t(0,"div",9),u(1,U,2,0,"small",16)(2,V,2,0,"small",16),o()),n&2){let c=P();a(),d("ngIf",c.nombre==null||c.nombre.errors==null?null:c.nombre.errors.required),a(),d("ngIf",c.nombre==null||c.nombre.errors==null?null:c.nombre.errors.minlength)}}function $(n,l){n&1&&(t(0,"div",9)(1,"small"),i(2,"Selecciona una fecha v\xE1lida."),o()())}function H(n,l){n&1&&(t(0,"small"),i(1,"El correo es obligatorio."),o())}function Y(n,l){n&1&&(t(0,"small"),i(1,"Introduce un correo v\xE1lido."),o())}function B(n,l){if(n&1&&(t(0,"div",9),u(1,H,2,0,"small",16)(2,Y,2,0,"small",16),o()),n&2){let c=P();a(),d("ngIf",c.correo==null||c.correo.errors==null?null:c.correo.errors.required),a(),d("ngIf",c.correo==null||c.correo.errors==null?null:c.correo.errors.email)}}function Z(n,l){n&1&&g(0,"div",9)}var ie=(()=>{let l=class l{constructor(s,r,e){this.fb=s,this.router=r,this.userService=e,this.passwordStrength=0,this.registerForm=this.fb.group({nombre:["",[m.required,m.minLength(3)]],fechaNacimiento:["",m.required],correo:["",[m.required,m.email]],password:["",[m.required,m.minLength(6)]]})}ngOnInit(){this.password?.valueChanges.subscribe(s=>{this.passwordStrength=this.calculatePasswordStrength(s||""),console.log("Fuerza de la contra: ",this.passwordStrength)})}get nombre(){return this.registerForm.get("nombre")}get fechaNacimiento(){return this.registerForm.get("fechaNacimiento")}get correo(){return this.registerForm.get("correo")}get password(){return this.registerForm.get("password")}calculatePasswordStrength(s){let r=0;return s.length>=6&&(r+=25),/[A-Z]/.test(s)&&(r+=25),/[0-9]/.test(s)&&(r+=25),/[\W]/.test(s)&&(r+=25),Math.min(r,100)}onSubmit(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched();return}let{nombre:s,fechaNacimiento:r,correo:e,password:b}=this.registerForm.value,p=r.split("-"),G=`${p[2]}-${p[1]}-${p[0]}`,C={full_name:s,date:G,email:e,password:b,is_Admin:0};console.log("Payload a enviar al backend:",C),this.userService.crearUsuario(C).subscribe({next:_=>{console.log("Usuario registrado:",_),this.router.navigate(["/login"])},error:_=>console.error("Error al registrar usuario:",_)})}navigateWithAnimation(s,r){let e=r.target;e.classList.add("clicked"),setTimeout(()=>{e.classList.remove("clicked"),this.router.navigate([s])},300)}isFormValid(){return!!(this.nombre?.valid&&this.fechaNacimiento?.valid&&this.correo?.valid&&this.password?.valid)}};l.\u0275fac=function(r){return new(r||l)(h(T),h(E),h(L))},l.\u0275cmp=M({type:l,selectors:[["app-register"]],decls:37,vars:16,consts:[[1,"container"],[1,"header",2,"margin-top","10%"],[1,"black"],[1,"green"],[3,"ngSubmit","formGroup"],["placeholder","Nombre Completo","type","text","formControlName","nombre"],["class","error",4,"ngIf"],["placeholder","Fecha de Nacimiento","type","date","formControlName","fechaNacimiento"],["placeholder","Correo","type","email","formControlName","correo"],[1,"error"],["placeholder","Contrase\xF1a","type","password","formControlName","password"],[1,"password-strength",2,"height","8px","width","100%","background-color","#e0e0e0","border-radius","9%","margin-bottom","9%","margin-top","5px","overflow","hidden",`/* estas propiedades ayudan a prevenir problemas de superposici\xF3n y layout */
                                                  position`,"relative","z-index","10"],[1,"strength-bar",2,"height","100%","width","20%","background","linear-gradient(to right, red, yellow, green)","transition","width 0.3s ease-in-out","z-index","11"],["type","submit",1,"btn",3,"click","disabled"],[1,"footer-container"],["href","login",2,"color","#1E90FF","text-decoration","none"],[4,"ngIf"]],template:function(r,e){r&1&&(t(0,"ion-content")(1,"div",0)(2,"div",1)(3,"h1")(4,"span",2),i(5,"School"),o(),t(6,"span",3),i(7,"Events"),o()()(),t(8,"form",4),v("ngSubmit",function(){return e.onSubmit()}),t(9,"h1")(10,"span"),i(11,"Reg\xEDstrate"),o()(),g(12,"input",5),u(13,W,3,2,"div",6),g(14,"input",7),u(15,$,3,0,"div",6),g(16,"input",8),x(17,B,3,2,"div",9),g(18,"input",10),t(19,"div",11),g(20,"div",12),o(),u(21,Z,1,0,"div",6),t(22,"button",13),v("click",function(p){return e.navigateWithAnimation("/login",p)}),i(23,"Sign In"),o()()()(),t(24,"ion-footer")(25,"footer",14)(26,"p"),i(27," Respetamos y protegemos su informaci\xF3n personal. Los datos se usan solo para mejorar su experiencia. Al usar la app, acepta nuestra "),t(28,"a",15),i(29,"Pol\xEDtica de Privacidad"),o(),i(30," y "),t(31,"a",15),i(32,"T\xE9rminos y Condiciones"),o(),i(33,". M\xE1s info en nuestra secci\xF3n "),t(34,"strong"),i(35,"SchoolEvents"),o(),i(36,". "),o()()()),r&2&&(a(8),d("formGroup",e.registerForm),a(4),f("invalid",(e.nombre==null?null:e.nombre.invalid)&&(e.nombre==null?null:e.nombre.touched)),a(),d("ngIf",(e.nombre==null?null:e.nombre.invalid)&&(e.nombre==null?null:e.nombre.touched)),a(),f("invalid",(e.fechaNacimiento==null?null:e.fechaNacimiento.invalid)&&(e.fechaNacimiento==null?null:e.fechaNacimiento.touched)),a(),d("ngIf",(e.fechaNacimiento==null?null:e.fechaNacimiento.invalid)&&(e.fechaNacimiento==null?null:e.fechaNacimiento.touched)),a(),f("invalid",(e.correo==null?null:e.correo.invalid)&&(e.correo==null?null:e.correo.touched)),a(),O(e.correo!=null&&e.correo.invalid&&(e.correo!=null&&e.correo.touched)?17:-1),a(),f("invalid",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),a(2),w("width",e.passwordStrength,"%"),a(),d("ngIf",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),a(),d("disabled",e.registerForm.invalid))},dependencies:[S,y,A,I,k,F,N,D,z,R,q,j],styles:["article[_ngcontent-%COMP%], aside[_ngcontent-%COMP%], details[_ngcontent-%COMP%], figcaption[_ngcontent-%COMP%], figure[_ngcontent-%COMP%], footer[_ngcontent-%COMP%], header[_ngcontent-%COMP%], hgroup[_ngcontent-%COMP%], nav[_ngcontent-%COMP%], section[_ngcontent-%COMP%]{display:block}.container[_ngcontent-%COMP%]{margin:auto 0}.header[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem;font-family:Poppins,sans-serif}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.8rem;font-weight:800;letter-spacing:1px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   .black[_ngcontent-%COMP%]{color:#1e2a38}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   .green[_ngcontent-%COMP%]{color:#2ecc71;text-shadow:0 0 8px rgba(46,204,113,.5)}html[_ngcontent-%COMP%]{font-size:100%;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{outline:none}label[_ngcontent-%COMP%], select[_ngcontent-%COMP%], button[_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%], input[type=radio][_ngcontent-%COMP%], input[type=checkbox][_ngcontent-%COMP%], input[type=button][_ngcontent-%COMP%]{cursor:pointer}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:visited, a[_ngcontent-%COMP%]:active, a[_ngcontent-%COMP%]:hover{text-decoration:none}[_ngcontent-%COMP%]::selection{background:#ed327b;color:#fff}[_ngcontent-%COMP%]::-moz-selection{background:#ed327b;color:#fff}*[_ngcontent-%COMP%]{font-size:100%;margin:0;padding:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}body[_ngcontent-%COMP%]{background:#63b47a}*[_ngcontent-%COMP%]{font-family:Helvetica Neue,Helvetica,Arial}h5[_ngcontent-%COMP%]{text-align:center;margin-top:5px;color:#0000004d}h5[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:visited{color:#fff;text-decoration:underline}h5[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{text-decoration:none}form[_ngcontent-%COMP%]{background:#fff;border-radius:6px;padding:30px 20px 20px;width:300px;margin:50px auto;box-shadow:15px 15px #0000001a}h1[_ngcontent-%COMP%]{text-align:center;font-size:1.4em;font-weight:700;color:#ccc;margin-bottom:24px}span[_ngcontent-%COMP%]{font-weight:200}input[_ngcontent-%COMP%]{width:100%;background:#f5f5f5;border:0;padding:20px;border-radius:6px;margin-bottom:10px;border:1px solid #eee;color:#000}.btn[_ngcontent-%COMP%]{position:relative;width:100%;padding:20px;border-radius:6px;border:0;background:#f26964;font-size:1.2em;color:#fff;text-shadow:1px 1px 0px rgba(0,0,0,.1);box-shadow:0 3px #c1524e}.btn[_ngcontent-%COMP%]:active{top:3px;box-shadow:none}h6[_ngcontent-%COMP%]{text-align:center;padding:35px 20px 20px;color:#777;cursor:pointer}.social[_ngcontent-%COMP%]{display:none}.fb[_ngcontent-%COMP%]{margin-top:15px;background:#3b5998;box-shadow:0 3px #2c416e}.tw[_ngcontent-%COMP%]{background:#00acee;box-shadow:0 3px #008dc3}.google[_ngcontent-%COMP%]{background:#db4a39;box-shadow:0 3px #b93f31}.footer-container[_ngcontent-%COMP%]{background-color:#000;color:#fff;text-align:center;padding:20px 10px;font-family:Arial,sans-serif;font-size:14px;line-height:1.6}.error[_ngcontent-%COMP%]{color:#f44336;font-size:.85em;margin-top:-5px;margin-bottom:10px;animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid #f44336;background-color:#ffecec;transition:all .3s ease}input.ng-valid.ng-touched[_ngcontent-%COMP%]{border:1px solid #4caf50;background-color:#f0fff0;transition:all .3s ease}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden;scroll-behavior:smooth}"]});let n=l;return n})();export{ie as RegisterPage};
