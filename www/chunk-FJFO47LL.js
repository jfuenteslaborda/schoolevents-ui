import{a as j}from"./chunk-BJCE6GIO.js";import{A as b,Ba as O,E as p,Ga as y,Ia as m,Ja as w,Ka as E,M as c,Ma as S,N as o,Na as k,O as i,Oa as F,P as x,Ra as I,Sa as L,Ta as z,U as P,V as _,ca as C,da as t,ea as M,qa as h,ta as v,v as l,vb as N,wb as T,y as f}from"./chunk-GZNI7DYC.js";import"./chunk-447CKG3T.js";import"./chunk-CDZFCBFW.js";import"./chunk-E2CLONXR.js";import"./chunk-KRDHHS7Z.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-LRFGNCHE.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";function A(n,a){n&1&&(o(0,"small"),t(1,"El correo es obligatorio."),i())}function D(n,a){n&1&&(o(0,"small"),t(1,"Introduce un correo v\xE1lido."),i())}function q(n,a){if(n&1&&(o(0,"div",12),p(1,A,2,0,"small",13)(2,D,2,0,"small",13),i()),n&2){let r=_();l(),c("ngIf",r.correo==null||r.correo.errors==null?null:r.correo.errors.required),l(),c("ngIf",r.correo==null||r.correo.errors==null?null:r.correo.errors.email)}}function G(n,a){n&1&&(o(0,"div",12)(1,"small"),t(2,"Usuario no encontrado"),i()())}function U(n,a){n&1&&(o(0,"small"),t(1,"La contrase\xF1a es obligatoria."),i())}function R(n,a){n&1&&(o(0,"small"),t(1,"M\xEDnimo 6 caracteres."),i())}function V(n,a){if(n&1&&(o(0,"div",12),p(1,U,2,0,"small",13)(2,R,2,0,"small",13),i()),n&2){let r=_();l(),c("ngIf",r.password==null||r.password.errors==null?null:r.password.errors.required),l(),c("ngIf",r.password==null||r.password.errors==null?null:r.password.errors.minlength)}}function H(n,a){if(n&1&&(o(0,"div",12)(1,"small"),t(2),i()()),n&2){let r=_();l(2),M(r.loginError)}}var $=(()=>{let a=class a{constructor(g,s,e){this.fb=g,this.router=s,this.userService=e,this.loginError="",this.userNotFound=!1,this.loginForm=this.fb.group({correo:["",[m.required,m.email]],password:["",[m.required,m.minLength(6)]]})}get correo(){return this.loginForm.get("correo")}get password(){return this.loginForm.get("password")}onSubmit(g){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}let{correo:s,password:e}=this.loginForm.value;this.userService.obtenerUsuarioPorEmail(s).subscribe({next:d=>{if(this.userNotFound=!1,d&&d.password===e)if(console.log("Login correcto:",d),this.userService.setUsuarioLogueado(d),g){let u=g.target;u.classList.add("clicked"),setTimeout(()=>{u.classList.remove("clicked"),this.router.navigate(["/calendar"])},300)}else this.router.navigate(["/calendar"]);else this.loginError="Correo o contrase\xF1a incorrectos"},error:d=>{console.error("Error al autenticar:",d),d.status===404?this.userNotFound=!0:this.loginError="Correo o contrase\xF1a incorrectos"}})}};a.\u0275fac=function(s){return new(s||a)(f(I),f(O),f(j))},a.\u0275cmp=b({type:a,selectors:[["app-login"]],decls:34,vars:10,consts:[[1,"container"],[1,"container-form"],[1,"header"],[1,"black"],[1,"green"],[3,"ngSubmit","formGroup"],["placeholder","Correo","type","email","formControlName","correo"],["class","error",4,"ngIf"],["placeholder","Contrase\xF1a","type","password","formControlName","password"],["type","submit",1,"btn",3,"disabled"],[1,"footer-container"],["href","login",2,"color","#1E90FF","text-decoration","none"],[1,"error"],[4,"ngIf"]],template:function(s,e){s&1&&(o(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"h1")(4,"span",3),t(5,"School"),i(),o(6,"span",4),t(7,"Events"),i()()(),o(8,"form",5),P("ngSubmit",function(u){return e.onSubmit(u)}),o(9,"h1")(10,"span"),t(11,"Inicia"),i(),t(12," Sesi\xF3n"),i(),x(13,"input",6),p(14,q,3,2,"div",7)(15,G,3,0,"div",7),x(16,"input",8),p(17,V,3,2,"div",7)(18,H,3,1,"div",7),o(19,"button",9),t(20,"Log in"),i()()()(),o(21,"ion-footer")(22,"footer",10)(23,"p"),t(24," Respetamos y protegemos su informaci\xF3n personal. Los datos se usan solo para mejorar su experiencia. Al usar la app, acepta nuestra "),o(25,"a",11),t(26,"Pol\xEDtica de Privacidad"),i(),t(27," y "),o(28,"a",11),t(29,"T\xE9rminos y Condiciones"),i(),t(30,". M\xE1s info en nuestra secci\xF3n "),o(31,"strong"),t(32,"SchoolEvents"),i(),t(33,". "),i()()()),s&2&&(l(8),c("formGroup",e.loginForm),l(5),C("invalid",(e.correo==null?null:e.correo.invalid)&&(e.correo==null?null:e.correo.touched)),l(),c("ngIf",(e.correo==null?null:e.correo.invalid)&&(e.correo==null?null:e.correo.touched)),l(),c("ngIf",e.userNotFound),l(),C("invalid",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),l(),c("ngIf",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),l(),c("ngIf",e.loginError),l(),c("disabled",e.loginForm.invalid))},dependencies:[v,h,L,S,y,w,E,z,k,F,N,T],styles:["article[_ngcontent-%COMP%], aside[_ngcontent-%COMP%], details[_ngcontent-%COMP%], figcaption[_ngcontent-%COMP%], figure[_ngcontent-%COMP%], footer[_ngcontent-%COMP%], header[_ngcontent-%COMP%], hgroup[_ngcontent-%COMP%], nav[_ngcontent-%COMP%], section[_ngcontent-%COMP%]{display:block}.container[_ngcontent-%COMP%]{margin:auto 0;display:flex;flex-direction:column;align-items:center;justify-content:center}ion-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.container-form[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.header[_ngcontent-%COMP%]{text-align:center;font-family:Poppins,sans-serif}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.8rem;font-weight:800;letter-spacing:1px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   .black[_ngcontent-%COMP%]{color:#1e2a38}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   .green[_ngcontent-%COMP%]{color:#2ecc71;text-shadow:0 0 8px rgba(46,204,113,.5)}html[_ngcontent-%COMP%]{font-size:100%;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}ion-content[_ngcontent-%COMP%]{--background: linear-gradient(to bottom, #98caf5 0%, #d4ee86 40%, #9aee56 100%);background-size:400% 400%;animation:_ngcontent-%COMP%_skyMove 12s ease-in-out infinite;transition:background .5s ease}@keyframes _ngcontent-%COMP%_skyMove{0%{background-position:0% 0%}50%{background-position:100% 50%}to{background-position:0% 0%}}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{outline:none}label[_ngcontent-%COMP%], select[_ngcontent-%COMP%], button[_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%], input[type=radio][_ngcontent-%COMP%], input[type=checkbox][_ngcontent-%COMP%], input[type=button][_ngcontent-%COMP%]{cursor:pointer}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:visited, a[_ngcontent-%COMP%]:active, a[_ngcontent-%COMP%]:hover{text-decoration:none}[_ngcontent-%COMP%]::selection{background:#ed327b;color:#fff}[_ngcontent-%COMP%]::-moz-selection{background:#ed327b;color:#fff}*[_ngcontent-%COMP%]{font-size:100%;margin:0;padding:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}body[_ngcontent-%COMP%]{background:#63b47a}*[_ngcontent-%COMP%]{font-family:Helvetica Neue,Helvetica,Arial}h5[_ngcontent-%COMP%]{text-align:center;margin-top:5px;color:#0000004d}h5[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:visited{color:#fff;text-decoration:underline}h5[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{text-decoration:none}form[_ngcontent-%COMP%]{background:#fff;border-radius:6px;padding:30px 20px 20px;width:300px;margin:50px auto;box-shadow:15px 15px #0000001a}h1[_ngcontent-%COMP%]{text-align:center;font-size:1.4em;font-weight:700;color:#ccc;margin-bottom:24px}span[_ngcontent-%COMP%]{font-weight:200}input[_ngcontent-%COMP%]{width:100%;background:#f5f5f5;border:0;padding:20px;border-radius:6px;margin-bottom:10px;border:1px solid #eee;color:#000}.btn[_ngcontent-%COMP%]{position:relative;width:100%;padding:20px;border-radius:6px;border:0;background:#f26964;font-size:1.2em;color:#fff;text-shadow:1px 1px 0px rgba(0,0,0,.1);box-shadow:0 3px #c1524e}.btn[_ngcontent-%COMP%]:active{top:3px;box-shadow:none}h6[_ngcontent-%COMP%]{text-align:center;padding:35px 20px 20px;color:#777;cursor:pointer}.social[_ngcontent-%COMP%]{display:none}.fb[_ngcontent-%COMP%]{margin-top:15px;background:#3b5998;box-shadow:0 3px #2c416e}.tw[_ngcontent-%COMP%]{background:#00acee;box-shadow:0 3px #008dc3}.google[_ngcontent-%COMP%]{background:#db4a39;box-shadow:0 3px #b93f31}.footer-container[_ngcontent-%COMP%]{background-color:#000;color:#fff;text-align:center;padding:20px 10px;font-family:Arial,sans-serif;font-size:14px;line-height:1.6}input.invalid[_ngcontent-%COMP%]{border-color:#f44336!important}.error[_ngcontent-%COMP%]{color:#f44336;font-size:.85em;margin-top:-5px;margin-bottom:10px;animation:_ngcontent-%COMP%_fadeIn .3s ease;text-align:left}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}"]});let n=a;return n})();export{$ as LoginPage};
